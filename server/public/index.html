<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DocFlow ‚Äî –°–æ–∑–¥–∞–π—Ç–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞ 5 –º–∏–Ω—É—Ç</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }
    body { background-color: #fdf8f2; color: #2d3748; line-height: 1.6; }
    .container { max-width: 1280px; margin: 0 auto; padding: 0 24px; }

    /* Header */
    header { padding: 16px 0; background: #ffffff; box-shadow: 0 2px 6px rgba(0,0,0,0.05); }
    .header-inner { display: flex; align-items: center; justify-content: space-between; }
    .brand { display: flex; align-items: center; gap: 12px; }
    .brand-logo { width: 36px; height: 36px; border-radius: 8px; background: linear-gradient(135deg, #1a3a5f, #3b82f6); display: inline-block; }
    .brand-name { font-size: 1.4rem; font-weight: 700; color: #1a3a5f; }
    .header-cta { padding: 10px 14px; background: #1a3a5f; color: #fff; border: none; border-radius: 10px; font-weight: 700; cursor: pointer; box-shadow: 0 2px 8px rgba(26,58,95,0.18); }
    .header-cta:hover { background: #16314d; }

    /* Hero */
    .hero { padding: 64px 0 28px; text-align: center; }
    .hero h1 { font-size: 2.25rem; color: #1a3a5f; margin-bottom: 14px; }
    .hero p { color: #4a5568; max-width: 720px; margin: 0 auto; }

    /* Main layout */
    .main { display: flex; flex-wrap: wrap; gap: 32px; align-items: stretch; margin: 32px 0 64px; }
    .left, .right { min-width: 320px; }
    .left { order: 1; flex: 1 1 0%; }
    .right { order: 2; flex: 0 0 460px; margin-left: auto; align-self: stretch; }

    /* Left: documents carousel */
    .left-card { background: #ffffff; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; box-shadow: 0 6px 16px rgba(0,0,0,0.06); }
    .left-title { color: #1a3a5f; font-weight: 700; margin-bottom: 14px; }
    .carousel { position: relative; padding-bottom: 56px; }
    .doc-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 14px; }
    .doc-item { border: 1px solid #e2e8f0; border-radius: 12px; padding: 16px; background: #ffffff; transition: border-color .2s, transform .2s; cursor: pointer; min-height: 96px; display: flex; flex-direction: column; justify-content: center; }
    .doc-item:hover { border-color: #1a3a5f; transform: translateY(-2px); background: #f8fafc; }
    .doc-item h4 { color: #1a3a5f; margin-bottom: 6px; font-size: 1rem; }
    .doc-item p { color: #64748b; font-size: .92rem; }
    .carousel-arrow { position: absolute; bottom: 10px; width: 34px; height: 34px; border: 0; border-radius: 999px; background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.88)); color: #1a3a5f; display: grid; place-items: center; cursor: pointer; box-shadow: 0 4px 12px rgba(26,58,95,0.14), inset 0 0 0 1px rgba(26,58,95,0.10); backdrop-filter: blur(4px); transition: transform .18s ease, box-shadow .18s ease, background .18s ease, color .18s ease; z-index: 2; }
    .carousel-arrow:hover { transform: scale(1.04); box-shadow: 0 8px 18px rgba(26,58,95,0.18), inset 0 0 0 1px rgba(26,58,95,0.16); background: linear-gradient(180deg, #ffffff, #f7fbff); color: #14324e; }
    .carousel-arrow:active { transform: scale(0.98); box-shadow: 0 3px 10px rgba(26,58,95,0.14), inset 0 0 0 1px rgba(26,58,95,0.2); }
    .carousel-arrow:focus-visible { outline: none; box-shadow: 0 0 0 2px rgba(59,130,246,0.35), 0 6px 16px rgba(26,58,95,0.18), inset 0 0 0 1px rgba(26,58,95,0.14); }
    .carousel-arrow.left { left: -8px; right: auto; }
    .carousel-arrow.right { right: 8px; }
    .arrow-icon { font-size: 14px; line-height: 1; display: inline-block; transform: translateY(1px); }

    /* Select list */
    .select-wrapper { margin-top: 18px; }
    .select-label { display: block; margin-bottom: 8px; color: #1a3a5f; font-weight: 600; }
    #docSelect { width: 100%; padding: 12px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 1rem; background: white; cursor: pointer; }

    /* Right: mini documents carousel + chat */
    .right-card { background: #ffffff; border-radius: 12px; padding: 18px; box-shadow: 0 6px 18px rgba(0,0,0,0.06); position: sticky; top: 24px; border: 1px solid #e2e8f0; height: 100%; }
    .mini-carousel { position: relative; margin-bottom: 16px; padding-bottom: 60px; }
    .mini-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; padding: 0 48px 36px; }
    .mini { border: 1px solid #e5e7eb; background: #fbfbfb; border-radius: 12px; height: 150px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; }
    .mini:before { content: ""; position: absolute; width: 72%; height: 88%; background: #ffffff; border: 1px solid #e5e7eb; border-radius: 4px; box-shadow: 0 1px 2px rgba(0,0,0,0.04) inset; }
    .mini span { position: relative; z-index: 1; font-size: .82rem; color: #3a4256; text-align: center; padding: 0 6px; }

    /* –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–µ–ª–æ–∫ –º–∏–Ω–∏-–∫–∞—Ä—É—Å–µ–ª–∏ */
    .mini-arrow {
      position: absolute;
      bottom: 8px;
      border: 0;
      border-radius: 50%;
      background: #fff;
      color: #1a3a5f;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(26,58,95,0.12), inset 0 0 0 1px #e2e8f0;
      transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
      z-index: 5;
      width: 32px;
      height: 32px;
      font-size: 16px;
    }
    .mini-arrow.left {
      left: 12px;
    }
    .mini-arrow.right {
      right: 12px;
    }
    .mini-arrow:hover {
      transform: scale(1.08);
      box-shadow: 0 4px 16px rgba(26,58,95,0.18), inset 0 0 0 1px rgba(26,58,95,0.16);
      background: linear-gradient(180deg, #ffffff, #f7fbff);
      color: #14324e;
    }
    .mini-arrow:active {
      transform: scale(0.96);
      box-shadow: 0 3px 8px rgba(26,58,95,0.14), inset 0 0 0 1px rgba(26,58,95,0.2);
    }
    .mini-arrow:focus-visible {
      outline: none;
      box-shadow: 0 0 0 2px rgba(59,130,246,0.35), 0 6px 14px rgba(26,58,95,0.16), inset 0 0 0 1px rgba(26,58,95,0.14);
    }

    /* Chat */
    .chat { margin-top: 10px; }
    .chat-header { color: #1a3a5f; font-weight: 700; margin-bottom: 8px; font-size: 1rem; }
    .chat-messages { height: 180px; overflow-y: auto; padding: 12px; background: #faf9f7; border: 1px solid #eee5d9; border-radius: 10px; margin-bottom: 10px; font-size: 0.95rem; }
    .typing { color: #718096; font-style: italic; white-space: pre-wrap; }
    .chat-input { width: 100%; padding: 12px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 1rem; }
    .chat-actions { display: flex; gap: 8px; margin-top: 8px; }
    .chat-send { padding: 10px 16px; background: #1a3a5f; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; }

    footer { background: #f5f0e6; color: #718096; padding: 24px 0; font-size: 0.9rem; text-align: center; border-top: 1px solid #e8e0d5; }

    /* Modal */
    .modal-overlay { position: fixed; inset: 0; background: rgba(17,24,39,0.5); display: none; align-items: center; justify-content: center; z-index: 50; padding: 16px; }
    .modal { width: 100%; max-width: 680px; background: #fff; border-radius: 14px; box-shadow: 0 20px 60px rgba(0,0,0,0.25); overflow: hidden; }
    .modal-header { display: flex; align-items: center; justify-content: space-between; padding: 14px 16px; border-bottom: 1px solid #eef2f7; background: #fbfbfb; }
    .modal-title { font-weight: 800; color: #1a3a5f; }
    .modal-close { background: transparent; border: none; font-size: 22px; color: #64748b; cursor: pointer; padding: 6px; }
    .modal-body { padding: 16px; }
    .modal-actions { display: flex; gap: 10px; justify-content: flex-end; padding: 0 16px 16px; }
    .btn { padding: 10px 16px; border-radius: 10px; border: none; cursor: pointer; font-weight: 700; }
    .btn-primary { background: #1a3a5f; color: #fff; }
    .btn-secondary { background: #e2e8f0; color: #334155; }

    /* Consent step */
    .consent-text { color: #475569; margin-bottom: 12px; }
    .consent-list { list-style: none; margin: 0 0 12px; padding: 0; }
    .consent-list li { display: flex; align-items: flex-start; gap: 10px; margin-bottom: 10px; }
    .consent-list input { margin-top: 3px; }

    /* Preview step */
    .preview-wrap { display: flex; flex-direction: column; gap: 12px; }
    .doc-preview { height: 320px; border: 1px solid #e5e7eb; border-radius: 10px; background: #fff; overflow: hidden; position: relative; }
    .doc-preview-inner { position: absolute; inset: 12px; border: 1px dashed #e5e7eb; border-radius: 8px; padding: 12px; font-family: 'Times New Roman', serif; font-size: 14px; line-height: 1.5; color: #111827; }
    .blurred { filter: blur(4px); }
    .highlight { background: #fffbeb; padding: 0 4px; border-radius: 4px; box-shadow: inset 0 0 0 1px #fde68a; }
    .price-line { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
    .price { font-weight: 800; color: #1a3a5f; }
    .email-input { width: 60%; min-width: 220px; padding: 10px; border-radius: 10px; border: 1px solid #cbd5e1; }
    .input-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 8px; }
    .input-grid input { padding: 10px; border: 1px solid #cbd5e1; border-radius: 8px; }
    .doc-select { margin-bottom: 10px; }
    .doc-select select { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 8px; background: #fff; }
    .provider-note { color:#64748b; font-size: .9rem; margin-top: 6px; }

    /* Success step */
    .success { text-align: center; color: #1a3a5f; }
    .download-links { display: flex; justify-content: center; gap: 12px; margin-top: 10px; }
    .download-links a { color: #1a3a5f; font-weight: 700; }

    @media (max-width: 1024px) {
      .mini-row { grid-template-columns: repeat(3, 1fr); }
      .mini { height: 120px; }
    }
    @media (max-width: 900px) {
      .main { flex-direction: column; }
      .right-card { position: static; }
      .right { flex: 1 1 auto; margin-left: 0; }
      .carousel-arrow.left { left: 6px; }
      .carousel-arrow.right { right: 6px; }
    }
    @media (max-width: 520px) {
      .doc-grid { grid-template-columns: 1fr 1fr; }
      .mini-row { grid-template-columns: repeat(3, 1fr); }
      .mini { height: 100px; }
      .hero h1 { font-size: 1.6rem; }
    }
  </style>
</head>
<body>
  <header>
    <div class="container header-inner">
      <div class="brand">
        <span class="brand-logo" aria-hidden="true"></span>
        <div class="brand-name">DocFlow</div>
      </div>
      <button class="header-cta" id="headerCta">–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —Å–µ–π—á–∞—Å</button>
    </div>
  </header>

  <section class="hero">
    <div class="container">
      <h1>–°–æ–∑–¥–∞–π—Ç–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏ –≥—Ä–∞–º–æ—Ç–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–Ω–ª–∞–π–Ω ‚Äî –∑–∞ 5 –º–∏–Ω—É—Ç</h1>
      <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Äî –∏ —Å–∫–∞—á–∞–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ Word –∏–ª–∏ PDF.</p>
    </div>
  </section>

  <div class="container main">
    <!-- LEFT: documents carousel (4 visible) -->
    <section class="left">
      <div class="left-card">
        <div class="left-title">–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</div>
        <div class="carousel">
          <button class="carousel-arrow left" id="leftPrev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–µ"><span class="arrow-icon">&#10094;</span></button>
          <div class="doc-grid" id="docGrid"></div>
          <button class="carousel-arrow right" id="leftNext" aria-label="–°–ª–µ–¥—É—é—â–∏–µ"><span class="arrow-icon">&#10095;</span></button>
        </div>

        <div class="select-wrapper">
          <label class="select-label" for="docSelect">–í—ã–±—Ä–∞—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞</label>
          <select id="docSelect">
            <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç ‚Äî</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –¥–∞—Ä–µ–Ω–∏—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</option>
            <option>–¢—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –ø–æ–¥—Ä—è–¥–∞</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥</option>
            <option>–î–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –¢–ú–¶</option>
            <option>–î–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –Ω–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤</option>
            <option>–ó–∞—è–≤–ª–µ–Ω–∏–µ –Ω–∞ —É–≤–æ–ª—å–Ω–µ–Ω–∏–µ</option>
            <option>–ó–∞—è–≤–ª–µ–Ω–∏–µ –Ω–∞ –æ—Ç–ø—É—Å–∫</option>
            <option>–†–∞—Å–ø–∏—Å–∫–∞ –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–µ–Ω–µ–≥</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –∑–∞–π–º–∞</option>
            <option>–î–æ–≥–æ–≤–æ—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –∫–æ–º–∏—Å—Å–∏–∏</option>
            <option>–î–æ–≥–æ–≤–æ—Ä —Ñ—Ä–∞–Ω—á–∞–π–∑–∏–Ω–≥–∞</option>
            <option>–£—Å—Ç–∞–≤ –û–û–û</option>
            <option>–ü—Ä–æ—Ç–æ–∫–æ–ª –æ–±—â–µ–≥–æ —Å–æ–±—Ä–∞–Ω–∏—è</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –ø–æ—Å—Ç–∞–≤–∫–∏</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –±–µ–∑–≤–æ–∑–º–µ–∑–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</option>
            <option>–°–æ–≥–ª–∞—à–µ–Ω–∏–µ –æ —Ä–∞—Å—Ç–æ—Ä–∂–µ–Ω–∏–∏ –¥–æ–≥–æ–≤–æ—Ä–∞</option>
            <option>–î–æ–≥–æ–≤–æ—Ä —Ü–µ—Å—Å–∏–∏</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã –∑–µ–º–µ–ª—å–Ω–æ–≥–æ —É—á–∞—Å—Ç–∫–∞</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏ –∑–µ–º–ª–∏</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –¥–∞—Ä–µ–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è</option>
            <option>–ó–∞—è–≤–ª–µ–Ω–∏–µ –≤ —Å—É–¥ (–∏—Å–∫–æ–≤–æ–µ)</option>
            <option>–•–æ–¥–∞—Ç–∞–π—Å—Ç–≤–æ –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞</option>
            <option>–ñ–∞–ª–æ–±–∞ –≤ –ø—Ä–æ–∫—É—Ä–∞—Ç—É—Ä—É</option>
            <option>–ó–∞—è–≤–ª–µ–Ω–∏–µ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç —Ç–æ–≤–∞—Ä–∞</option>
            <option>–ê–∫—Ç —Å–≤–µ—Ä–∫–∏ –≤–∑–∞–∏–º–Ω—ã—Ö —Ä–∞—Å—á—ë—Ç–æ–≤</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –ù–î–ê (–æ –Ω–µ—Ä–∞–∑–≥–ª–∞—à–µ–Ω–∏–∏)</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –æ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –ª–∏–∑–∏–Ω–≥–∞</option>
            <option>–î–æ–≥–æ–≤–æ—Ä —ç–Ω–µ—Ä–≥–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –ø–µ—Ä–µ–≤–æ–∑–∫–∏</option>
            <option>–î–æ–≥–æ–≤–æ—Ä —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è</option>
            <option>–ó–∞–≤–µ—â–∞–Ω–∏–µ</option>
            <option>–°–æ–≥–ª–∞—à–µ–Ω–∏–µ –æ–± —É–ø–ª–∞—Ç–µ –∞–ª–∏–º–µ–Ω—Ç–æ–≤</option>
            <option>–ë—Ä–∞—á–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏ –¥–æ–ª–∏</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã –Ω–µ–∂–∏–ª–æ–≥–æ –ø–æ–º–µ—â–µ–Ω–∏—è</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –°–ú–†</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –∞–≤—Ç–æ—Ä—Å–∫–æ–≥–æ –∑–∞–∫–∞–∑–∞</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –ø–æ–∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è</option>
            <option>–ó–∞—è–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –ò–ù–ù</option>
            <option>–ó–∞—è–≤–ª–µ–Ω–∏–µ –≤ –Ω–∞–ª–æ–≥–æ–≤—É—é (—Ñ–æ—Ä–º–∞ –†21001)</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –∫–æ–Ω—Ü–µ—Å—Å–∏–∏</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –º–µ–Ω—ã</option>
            <option>–î–æ–≥–æ–≤–æ—Ä —Ä–µ–Ω—Ç—ã</option>
            <option>–î–æ–≥–æ–≤–æ—Ä –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</option>
          </select>
        </div>
      </div>
    </section>

    <!-- RIGHT: mini docs carousel (3 visible) + chat -->
    <aside class="right">
      <div class="right-card">
        <div class="mini-carousel">
          <button class="mini-arrow left" id="miniPrev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–π"><span class="arrow-icon">&#10094;</span></button>
          <div class="mini-row" id="miniRow"></div>
          <button class="mini-arrow right" id="miniNext" aria-label="–°–ª–µ–¥—É—é—â–∏–π"><span class="arrow-icon">&#10095;</span></button>
        </div>

        <!-- –û–±—Ä–∞–∑—Ü—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ -->
        <div class="document-samples" style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
          <h4 style="margin: 0 0 10px 0; color: #2c3e50; font-size: 16px;">üìÑ –û–±—Ä–∞–∑—Ü—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h4>
          <div style="display: flex; flex-wrap: wrap; gap: 8px;">
            <button class="sample-doc-btn" data-doc="gift" style="padding: 6px 12px; background: #e3f2fd; border: 1px solid #2196f3; border-radius: 4px; cursor: pointer; font-size: 12px;">–î–æ–≥–æ–≤–æ—Ä –¥–∞—Ä–µ–Ω–∏—è</button>
            <button class="sample-doc-btn" data-doc="sale-car" style="padding: 6px 12px; background: #e8f5e8; border: 1px solid #4caf50; border-radius: 4px; cursor: pointer; font-size: 12px;">–ö—É–ø–ª—è-–ø—Ä–æ–¥–∞–∂–∞ –∞–≤—Ç–æ</button>
            <button class="sample-doc-btn" data-doc="rent" style="padding: 6px 12px; background: #fff3e0; border: 1px solid #ff9800; border-radius: 4px; cursor: pointer; font-size: 12px;">–ê—Ä–µ–Ω–¥–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã</button>
            <button class="sample-doc-btn" data-doc="service" style="padding: 6px 12px; background: #f3e5f5; border: 1px solid #9c27b0; border-radius: 4px; cursor: pointer; font-size: 12px;">–£—Å–ª—É–≥–∏</button>
            <button class="sample-doc-btn" data-doc="loan" style="padding: 6px 12px; background: #ffebee; border: 1px solid #f44336; border-radius: 4px; cursor: pointer; font-size: 12px;">–ó–∞–π–º</button>
          </div>
        </div>

        <div class="chat">
          <div class="chat-header">–ß–∞—Ç —Å —é—Ä–∏—Å—Ç–æ–º</div>
          <div class="chat-messages" id="chatMessages">
            <div class="typing" id="typing"></div>
          </div>
          <textarea class="chat-input" id="userMessage" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..." rows="3"></textarea>
          <div class="chat-actions">
            <button class="chat-send" id="sendBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            <button class="btn btn-secondary" id="startFlowBtn">–ù–∞—á–∞—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</button>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <!-- Modal: Multi-step flow -->
  <div class="modal-overlay" id="modalOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-header">
        <div class="modal-title" id="modalTitle">–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</div>
        <button class="modal-close" id="modalClose" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
      </div>
      <div class="modal-body">
        <!-- Step 1: Consent -->
        <div class="step" id="step1">
          <p class="consent-text">–î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –Ω–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–∞—à–µ —Å–æ–≥–ª–∞—Å–∏–µ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.</p>
          <ul class="consent-list">
            <li><input type="checkbox" id="chk1" /><label for="chk1">–°–æ–≥–ª–∞—Å–µ–Ω(–∞) –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞.</label></li>
            <li><input type="checkbox" id="chk2" /><label for="chk2">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤–≤–æ–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–≥–ª–∞—Å–∏–µ —Å –æ—Ñ–µ—Ä—Ç–æ–π.</label></li>
          </ul>
        </div>

        <!-- Step 2: Preview + email + price -->
        <div class="step" id="step2" style="display:none;">
          <div class="preview-wrap">
            <div class="input-grid">
              <input id="sellerName" type="text" placeholder="–§–ò–û –ø—Ä–æ–¥–∞–≤—Ü–∞" />
              <input id="sellerPass" type="text" placeholder="–ü–∞—Å–ø–æ—Ä—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞" />
              <input id="buyerName" type="text" placeholder="–§–ò–û –ø–æ–∫—É–ø–∞—Ç–µ–ª—è" />
              <input id="buyerPass" type="text" placeholder="–ü–∞—Å–ø–æ—Ä—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è" />
            </div>
            <div class="doc-select">
              <select id="docTypeSelect" aria-label="–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞"></select>
            </div>
            <div class="doc-preview">
              <div class="doc-preview-inner">
                <div><strong id="pvDocTitle">–î–æ–≥–æ–≤–æ—Ä</strong></div>
                <div style="margin-top:8px;">
                  –ü—Ä–æ–¥–∞–≤–µ—Ü: <span class="highlight" id="pvSellerName">‚Äî</span>, –ø–∞—Å–ø–æ—Ä—Ç <span class="highlight" id="pvSellerPass">‚Äî</span><br/>
                  –ü–æ–∫—É–ø–∞—Ç–µ–ª—å: <span class="highlight" id="pvBuyerName">‚Äî</span>, –ø–∞—Å–ø–æ—Ä—Ç <span class="highlight" id="pvBuyerPass">‚Äî</span>
                </div>
                <div class="blurred" style="margin-top:10px;">
                  1. –ü—Ä–µ–¥–º–µ—Ç –¥–æ–≥–æ–≤–æ—Ä–∞: –°—Ç–æ—Ä–æ–Ω—ã –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å –æ –∫—É–ø–ª–µ-–ø—Ä–æ–¥–∞–∂–µ –æ–±—ä–µ–∫—Ç–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ ...<br/>
                  2. –¶–µ–Ω–∞ –¥–æ–≥–æ–≤–æ—Ä–∞, –ø–æ—Ä—è–¥–æ–∫ —Ä–∞—Å—á—ë—Ç–æ–≤, –ø—Ä–∞–≤–∞ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –°—Ç–æ—Ä–æ–Ω ...<br/>
                  3. –ó–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –°—Ç–æ—Ä–æ–Ω –∏ –ø–æ–¥–ø–∏—Å–∏ ...
                </div>
              </div>
            </div>
            <div class="price-line">
              <div class="price">–°—Ç–æ–∏–º–æ—Å—Ç—å: <span id="priceValue">700</span> ‚ÇΩ</div>
              <input class="email-input" id="emailInput" type="email" placeholder="–í–∞—à–∞ –ø–æ—á—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏" />
            </div>
            <div class="provider-note">–ü—Ä–æ–≤–∞–π–¥–µ—Ä –æ–ø–ª–∞—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: YooKassa</div>
          </div>
        </div>

        <!-- Step 3: Success -->
        <div class="step" id="step3" style="display:none;">
          <div class="success">
            <div style="font-weight:800; margin-bottom:8px;">–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑!</div>
            <div>–î–æ–∫—É–º–µ–Ω—Ç –∏ —á–µ–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –ø–æ—á—Ç—É.</div>
            <div class="download-links">
              <a href="#" download>–°–∫–∞—á–∞—Ç—å PDF</a>
              <a href="#" download>–°–∫–∞—á–∞—Ç—å DOCX</a>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn btn-secondary" id="backBtn" style="display:none;">–ù–∞–∑–∞–¥</button>
        <button class="btn btn-primary" id="nextBtn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <footer>
    <div class="container" style="display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;">
      <div style="color:#718096;">¬© 2025 DocFlow</div>
      <div style="color:#718096; flex:1; text-align:center;">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–µ–π, –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —é—Ä–∏—Å—Ç—É.</div>
      <nav style="display:flex; gap:14px;">
        <a href="vacancies.html" style="color:#1a3a5f; font-weight:700;">–í–∞–∫–∞–Ω—Å–∏–∏</a>
        <a href="lawyer.html" style="color:#1a3a5f; font-weight:700;">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º</a>
        <a href="cooperation.html" style="color:#1a3a5f; font-weight:700;">–ü–∞—Ä—Ç–Ω—ë—Ä–∞–º</a>
      </nav>
    </div>
  </footer>

  <script src="http://localhost:8080/socket.io/socket.io.js"></script>
  <script>
    // Left carousel data (20 items, last is "–°–æ–∑–¥–∞—Ç—å –¥—Ä—É–≥–æ–π –¥–æ–∫—É–º–µ–Ω—Ç")
    const leftDocs = [
      { title: '–î–æ–≥–æ–≤–æ—Ä –¥–∞—Ä–µ–Ω–∏—è', desc: '–î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∏–º—É—â–µ—Å—Ç–≤–∞ –±–µ–∑ —Ä–∏—Å–∫–æ–≤' },
      { title: '–î–æ–≥–æ–≤–æ—Ä –∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏', desc: '–ê–≤—Ç–æ, –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å, —Ç–µ—Ö–Ω–∏–∫–∞' },
      { title: '–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã', desc: '–° –∑–∞–ª–æ–≥–æ–º, –∫–æ–º–º—É–Ω–∞–ª–∫–æ–π –∏ —Å—Ä–æ–∫–æ–º' },
      { title: '–î–æ–≥–æ–≤–æ—Ä –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥', desc: '–î–ª—è —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä–æ–≤ –∏ –ò–ü' },
      { title: '–î–æ–≥–æ–≤–æ—Ä –ø–æ–¥—Ä—è–¥–∞', desc: '–†–∞–±–æ—Ç—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º' },
      { title: '–î–æ–≥–æ–≤–æ—Ä –∑–∞–π–º–∞', desc: '–ó–∞–π–º –ø–æ–¥ —Ä–∞—Å–ø–∏—Å–∫—É' },
      { title: '–¢—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä', desc: '–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞' },
      { title: '–î–æ–≥–æ–≤–æ—Ä –∫–æ–º–∏—Å—Å–∏–∏', desc: '–ü–æ—Å—Ä–µ–¥–Ω–∏—á–µ—Å–∫–∏–µ —É—Å–ª—É–≥–∏' },
      { title: '–î–æ–≥–æ–≤–æ—Ä –ø–æ—Å—Ç–∞–≤–∫–∏', desc: '–ü–æ—Å—Ç–∞–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤' },
      { title: '–î–æ–≥–æ–≤–æ—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è', desc: '–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ' },
      { title: '–î–æ–≥–æ–≤–æ—Ä —Ñ—Ä–∞–Ω—á–∞–π–∑–∏–Ω–≥–∞', desc: '–ü—Ä–∞–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±—Ä–µ–Ω–¥' },
      { title: '–î–æ–≥–æ–≤–æ—Ä –ª–∏–∑–∏–Ω–≥–∞', desc: '–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞—Ä–µ–Ω–¥–∞' },
      { title: '–î–æ–≥–æ–≤–æ—Ä —ç–Ω–µ—Ä–≥–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è', desc: '–ü–æ—Å—Ç–∞–≤–∫–∞ —ç–Ω–µ—Ä–≥–∏–∏' },
      { title: '–î–æ–≥–æ–≤–æ—Ä –ø–µ—Ä–µ–≤–æ–∑–∫–∏', desc: '–ì—Ä—É–∑/–ø–∞—Å—Å–∞–∂–∏—Ä—ã' },
      { title: '–î–æ–≥–æ–≤–æ—Ä —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è', desc: '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ —Ä–∏—Å–∫–æ–≤' },
      { title: '–ë—Ä–∞—á–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä', desc: '–ò–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è' },
      { title: '–î–æ–≥–æ–≤–æ—Ä —Ü–µ—Å—Å–∏–∏', desc: '–£—Å—Ç—É–ø–∫–∞ –ø—Ä–∞–≤–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è' },
      { title: '–î–æ–≥–æ–≤–æ—Ä —Ä–µ–Ω—Ç—ã', desc: '–†–µ–Ω—Ç–∞ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ' },
      { title: '–ê—Ä–µ–Ω–¥–∞ –Ω–µ–∂–∏–ª–æ–≥–æ –ø–æ–º–µ—â–µ–Ω–∏—è', desc: '–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å' },
      { title: '–°–æ–∑–¥–∞—Ç—å –¥—Ä—É–≥–æ–π –¥–æ–∫—É–º–µ–Ω—Ç', desc: '–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É' }
    ];

    let leftIndex = 0; // index of first visible in leftDocs
    const docGrid = document.getElementById('docGrid');
    function titleToDocId(title) {
      const map = {
        '–î–æ–≥–æ–≤–æ—Ä –¥–∞—Ä–µ–Ω–∏—è': 'gift',
        '–î–æ–≥–æ–≤–æ—Ä –∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏': 'sale-flat',
        '–î–æ–≥–æ–≤–æ—Ä –∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è': 'sale-car',
        '–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã': 'rent',
        '–î–æ–≥–æ–≤–æ—Ä –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥': 'service',
        '–î–æ–≥–æ–≤–æ—Ä –∑–∞–π–º–∞': 'loan',
        '–î–æ–≥–æ–≤–æ—Ä –ù–î–ê (–æ –Ω–µ—Ä–∞–∑–≥–ª–∞—à–µ–Ω–∏–∏)': 'nda',
        '–°–æ–∑–¥–∞—Ç—å –¥—Ä—É–≥–æ–π –¥–æ–∫—É–º–µ–Ω—Ç': 'other'
      };
      // Direct match
      if (map[title]) return map[title];
      // Fallbacks by keywords
      if (title.toLowerCase().includes('–¥–∞—Ä–µ–Ω–∏')) return 'gift';
      if (title.toLowerCase().includes('–∞—Ä–µ–Ω')) return 'rent';
      if (title.toLowerCase().includes('—É—Å–ª—É–≥')) return 'service';
      if (title.toLowerCase().includes('–∑–∞–π–º')) return 'loan';
      if (title.toLowerCase().includes('–∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏') && title.toLowerCase().includes('–∞–≤—Ç–æ')) return 'sale-car';
      if (title.toLowerCase().includes('–∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏')) return 'sale-flat';
      return 'other';
    }

    function renderLeft() {
      docGrid.innerHTML = '';
      for (let i = 0; i < 4; i++) {
        const doc = leftDocs[(leftIndex + i) % leftDocs.length];
        const div = document.createElement('div');
        div.className = 'doc-item';
        div.innerHTML = `<h4>${doc.title}</h4><p>${doc.desc}</p>`;
        div.dataset.docId = titleToDocId(doc.title);
        div.addEventListener('click', () => {
          const id = div.dataset.docId || 'other';
          const select = document.getElementById('docTypeSelect');
          if (select) { select.value = id; updateDocPreviewFromSelect(); }
          openModal();
        });
        docGrid.appendChild(div);
      }
    }
    document.getElementById('leftPrev').addEventListener('click', () => {
      leftIndex = (leftIndex - 4 + leftDocs.length) % leftDocs.length;
      renderLeft();
    });
    document.getElementById('leftNext').addEventListener('click', () => {
      leftIndex = (leftIndex + 4) % leftDocs.length;
      renderLeft();
    });

    // Right mini-docs carousel (3 visible) ‚Äî using simple labels as placeholders for tiny previews
    const miniDocs = [
      '–î–∞—Ä–µ–Ω–∏–µ ‚Äî –æ–±—Ä–∞–∑–µ—Ü', '–ö—É–ø–ª—è-–ø—Ä–æ–¥–∞–∂–∞ –∞–≤—Ç–æ', '–ê—Ä–µ–Ω–¥–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã', '–û–∫–∞–∑–∞–Ω–∏–µ —É—Å–ª—É–≥', '–ü–æ–¥—Ä—è–¥', '–ó–∞–π–º', '–ö–æ–º–∏—Å—Å–∏—è', '–ü–æ—Å—Ç–∞–≤–∫–∞', '–•—Ä–∞–Ω–µ–Ω–∏–µ', '–§—Ä–∞–Ω—á–∞–π–∑–∏–Ω–≥', '–õ–∏–∑–∏–Ω–≥', '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ', '–ü–µ—Ä–µ–≤–æ–∑–∫–∞'
    ];
    let miniIndex = 0;
    const miniRow = document.getElementById('miniRow');
    function renderMini() {
      miniRow.innerHTML = '';
      for (let i = 0; i < 3; i++) {
        const label = miniDocs[(miniIndex + i) % miniDocs.length];
        const m = document.createElement('div');
        m.className = 'mini';
        m.innerHTML = `<span>${label}</span>`;
        miniRow.appendChild(m);
      }
    }
    document.getElementById('miniPrev').addEventListener('click', () => {
      miniIndex = (miniIndex - 1 + miniDocs.length) % miniDocs.length;
      renderMini();
    });
    document.getElementById('miniNext').addEventListener('click', () => {
      miniIndex = (miniIndex + 1) % miniDocs.length;
      renderMini();
    });

    // –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –º–∏–Ω–∏-–∫–∞—Ä—É—Å–µ–ª–∏: –∫–∞–∂–¥—ã–µ 4 —Å–µ–∫—É–Ω–¥—ã —à–∞–≥ –≤–ø–µ—Ä—ë–¥
    let miniAutoTimer = setInterval(function(){
      miniIndex = (miniIndex + 1) % miniDocs.length;
      renderMini();
    }, 4000);
    // –ü–∞—É–∑–∞ –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    ['miniPrev','miniNext','miniRow'].forEach(function(id){
      const el = document.getElementById(id) || (id==='miniRow'? miniRow : null);
      if (!el) return;
      el.addEventListener('mouseenter', function(){ clearInterval(miniAutoTimer); miniAutoTimer = null; });
      el.addEventListener('mouseleave', function(){ if (!miniAutoTimer) miniAutoTimer = setInterval(function(){ miniIndex = (miniIndex + 1) % miniDocs.length; renderMini(); }, 4000); });
    });

    // Chat typing effect with rotating phrases
    const typingEl = document.getElementById('typing');
    const phrases = [
      '–ù–∞–ø–∏—à—É –ª—é–±–æ–π –¥–æ–∫—É–º–µ–Ω—Ç –∏–ª–∏ –∑–∞—è–≤–ª–µ–Ω–∏–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å. –°–∫–∞–∂–∏—Ç–µ, –∫–∞–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç? ',
      '–ü–æ–¥—Å–∫–∞–∂—É, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä –ø–æ–¥ –≤–∞—à—É —Å–∏—Ç—É–∞—Ü–∏—é. –ß–µ–º –ø–æ–º–æ—á—å? ',
      '–ì–æ—Ç–æ–≤ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞ 5 –º–∏–Ω—É—Ç. –ö–∞–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω—É–∂–µ–Ω? ',
      '–ü–æ–º–æ–≥—É –æ—Ñ–æ—Ä–º–∏—Ç—å —é—Ä–∏–¥–∏—á–µ—Å–∫–∏ –≥—Ä–∞–º–æ—Ç–Ω–æ. –ß—Ç–æ —Å–æ—Å—Ç–∞–≤–ª—è–µ–º? ',
      '–ü–æ–¥–≥–æ—Ç–æ–≤–ª—é –ø—Ä–æ–µ–∫—Ç –¥–æ–≥–æ–≤–æ—Ä–∞ –∏ –ø—Ä–∏—à–ª—é –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É. –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è? ',
      '–ó–∞–¥–∞–º –ø–∞—Ä—É —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —Å–æ–±–µ—Ä—É –¥–æ–∫—É–º–µ–Ω—Ç. –û —á–µ–º —Ä–µ—á—å? ',
      '–ü–æ–¥–±–µ—Ä—É –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏. –ö–∞–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω—É–∂–µ–Ω —Å–µ–π—á–∞—Å? '
    ];
    let phraseIndex = Math.floor(Math.random() * phrases.length);
    let charIndex = 0;
    let deleting = false;
    function typeLoop() {
      const current = phrases[phraseIndex];
      if (!deleting) {
        typingEl.textContent = current.slice(0, charIndex++);
        if (charIndex > current.length) {
          deleting = true;
          setTimeout(typeLoop, 1400);
          return;
        }
      } else {
        typingEl.textContent = current.slice(0, charIndex--);
        if (charIndex <= 0) {
          deleting = false;
          phraseIndex = (phraseIndex + 1) % phrases.length;
        }
      }
      const delay = deleting ? 28 : 42; // typing speeds
      setTimeout(typeLoop, delay);
    }

    // Chat send
    const chatBox = document.getElementById('chatMessages');
    const inputEl = document.getElementById('userMessage');
    // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —á–∞—Ç–∞ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è –∏ —Å–æ–∫–µ—Ç
    let visitorChatId = null;
    const socket = io(window.location.origin, { transports: ['websocket'] });
    async function ensureVisitorChat(){
      try {
        if (visitorChatId) {
          console.log('–ß–∞—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:', visitorChatId);
          return visitorChatId;
        }
        console.log('–°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —á–∞—Ç...');
        const r = await fetch(window.location.origin + '/api/chats', {
          method: 'POST', headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ visitor_id: 'site-' + Math.random().toString(36).slice(2) })
        });
        const d = await r.json();
        console.log('–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', d);
        visitorChatId = d && d.id;
        if (visitorChatId) {
          console.log('–ß–∞—Ç —Å–æ–∑–¥–∞–Ω:', visitorChatId);
          socket.emit('join-chat', { chatId: visitorChatId });
          // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π
          loadChatHistory();
        } else {
          console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å ID —á–∞—Ç–∞');
        }
        return visitorChatId;
      } catch(e) { 
        console.log('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–∞:', e);
        return null; 
      }
    }

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞
    async function loadChatHistory() {
      if (!visitorChatId) return;
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
      chatBox.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞...</div>';
      
      try {
        const response = await fetch(window.location.origin + `/api/chats/${visitorChatId}/messages`);
        if (response.ok) {
          const messages = await response.json();
          // –û—á–∏—â–∞–µ–º —á–∞—Ç –∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é
          chatBox.innerHTML = '';
          
          if (messages.length === 0) {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            const welcomeDiv = document.createElement('div');
            welcomeDiv.style.cssText = 'text-align: center; color: #666; padding: 20px; font-style: italic;';
            welcomeDiv.innerHTML = 'üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ó–∞–¥–∞–π—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å —é—Ä–∏—Å—Ç—É.';
            chatBox.appendChild(welcomeDiv);
          } else {
            messages.forEach(msg => {
              const div = document.createElement('div');
              div.style.cssText = 'margin-bottom: 10px; padding: 8px; border-radius: 8px;';
              
              let who = '–°–æ–±–µ—Å–µ–¥–Ω–∏–∫';
              let bgColor = '#f0f0f0';
              if (msg.sender === 'ai') {
                who = 'ü§ñ –ü–æ–º–æ—â–Ω–∏–∫';
                bgColor = '#e3f2fd';
              } else if (msg.sender === 'lawyer') {
                who = '‚öñÔ∏è –Æ—Ä–∏—Å—Ç';
                bgColor = '#e8f5e8';
              } else if (msg.sender === 'visitor') {
                who = 'üë§ –í—ã';
                bgColor = '#fff3e0';
              }
              
              div.style.backgroundColor = bgColor;
              div.innerHTML = `<strong>${who}:</strong> ${msg.text}`;
              chatBox.appendChild(div);
            });
          }
          chatBox.scrollTop = chatBox.scrollHeight;
        } else {
          chatBox.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">–ß–∞—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!</div>';
        }
      } catch (e) {
        console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞:', e);
        chatBox.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">–ß–∞—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!</div>';
      }
    }
    socket.on('connect', function(){ if (visitorChatId) socket.emit('join-chat', { chatId: visitorChatId }); });
    socket.on('message', function(evt){
      if (!visitorChatId || evt.chatId !== visitorChatId) return;
      
      // –£–±–∏—Ä–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –µ—Å—Ç—å
      const welcomeMsg = chatBox.querySelector('div[style*="font-style: italic"]');
      if (welcomeMsg) welcomeMsg.remove();
      
      const div = document.createElement('div');
      div.style.cssText = 'margin-bottom: 10px; padding: 8px; border-radius: 8px;';
      
      let who = '–°–æ–±–µ—Å–µ–¥–Ω–∏–∫';
      let bgColor = '#f0f0f0';
      if (evt.sender === 'ai') {
        who = 'ü§ñ –ü–æ–º–æ—â–Ω–∏–∫';
        bgColor = '#e3f2fd';
      } else if (evt.sender === 'lawyer') {
        who = '‚öñÔ∏è –Æ—Ä–∏—Å—Ç';
        bgColor = '#e8f5e8';
      } else if (evt.sender === 'visitor') {
        who = 'üë§ –í—ã';
        bgColor = '#fff3e0';
      }
      
      div.style.backgroundColor = bgColor;
      div.innerHTML = `<strong>${who}:</strong> ${evt.text}`;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    });
    async function sendMessage() {
      const msg = inputEl.value.trim();
      if (!msg) return;
      
      console.log('–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ:', msg);
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—Ç–ø—Ä–∞–≤–∫–∏
      const sendBtn = document.getElementById('sendBtn');
      const originalText = sendBtn.textContent;
      sendBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
      sendBtn.disabled = true;
      
      inputEl.value = '';
      
      // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –Ω–∞–ª–∏—á–∏–µ —á–∞—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ Socket.IO (—Å–µ—Ä–≤–µ—Ä —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≤ –ë–î)
      const cid = await ensureVisitorChat();
      if (!cid) {
        console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å ID —á–∞—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è');
        sendBtn.textContent = originalText;
        sendBtn.disabled = false;
        return;
      }
      
      console.log('–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç:', cid);
      socket.emit('message', { chatId: cid, sender: 'visitor', text: msg });
      
      // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
      setTimeout(() => {
        sendBtn.textContent = originalText;
        sendBtn.disabled = false;
      }, 1000);
    }
    document.getElementById('sendBtn').addEventListener('click', sendMessage);
    inputEl.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); }
    });

    // Pricing per document (–∑–∞–≥—Ä—É–∂–∞–µ–º —Å —Å–µ—Ä–≤–µ—Ä–∞)
    let docCatalog = [
      { id: 'gift', title: '–î–æ–≥–æ–≤–æ—Ä –¥–∞—Ä–µ–Ω–∏—è', price: 500 },
      { id: 'sale-car', title: '–î–æ–≥–æ–≤–æ—Ä –∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è', price: 700 },
      { id: 'sale-flat', title: '–î–æ–≥–æ–≤–æ—Ä –∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏ –∫–≤–∞—Ä—Ç–∏—Ä—ã', price: 900 },
      { id: 'rent', title: '–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã', price: 600 },
      { id: 'service', title: '–î–æ–≥–æ–≤–æ—Ä –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥', price: 650 },
      { id: 'loan', title: '–î–æ–≥–æ–≤–æ—Ä –∑–∞–π–º–∞', price: 550 },
      { id: 'nda', title: '–î–æ–≥–æ–≤–æ—Ä –ù–î–ê (–æ –Ω–µ—Ä–∞–∑–≥–ª–∞—à–µ–Ω–∏–∏)', price: 600 },
      { id: 'other', title: '–°–æ–∑–¥–∞—Ç—å –¥—Ä—É–≥–æ–π –¥–æ–∫—É–º–µ–Ω—Ç', price: 750 }
    ];

    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    async function loadDocumentsFromServer() {
      try {
        console.log('–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —Å–µ—Ä–≤–µ—Ä–∞...');
        const res = await fetch(window.location.origin + '/api/documents');
        console.log('–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', res.status);
        const docs = await res.json();
        console.log('–ü–æ–ª—É—á–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç—ã:', docs);
        if (docs && docs.length > 0) {
          // –û–±–Ω–æ–≤–ª—è–µ–º docCatalog –¥–∞–Ω–Ω—ã–º–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞
          docCatalog = docs.map(doc => ({
            id: doc.id,
            title: doc.title,
            price: doc.base_price
          }));
          
          // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫
          fillDocTypeSelect();
          console.log('–î–æ–∫—É–º–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Å —Å–µ—Ä–≤–µ—Ä–∞:', docs.length);
        } else {
          console.log('–°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤');
        }
      } catch (error) {
        console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —Å–µ—Ä–≤–µ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ:', error);
      }
    }

    async function fillDocTypeSelect() {
      const sel = document.getElementById('docTypeSelect');
      if (!sel) return;
      sel.innerHTML = '';
      docCatalog.forEach(d => {
        const opt = document.createElement('option');
        opt.value = d.id; opt.textContent = d.title;
        sel.appendChild(opt);
      });
    }
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –∑–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–∏—Å–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    loadDocumentsFromServer().then(() => {
      fillDocTypeSelect();
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –æ–±—Ä–∞–∑—Ü–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('sample-doc-btn')) {
        const docType = e.target.getAttribute('data-doc');
        const docSelect = document.getElementById('docTypeSelect');
        if (docSelect) {
          docSelect.value = docType;
          updateDocPreviewFromSelect();
        }
      }
    });

    function updateDocPreviewFromSelect() {
      const sel = document.getElementById('docTypeSelect');
      const titleEl = document.getElementById('pvDocTitle');
      const priceEl = document.getElementById('priceValue');
      if (!sel || !titleEl || !priceEl) return;
      const doc = docCatalog.find(d => d.id === sel.value) || docCatalog[0];
      titleEl.textContent = doc.title;
      priceEl.textContent = doc.price;
    }

    // Init
    renderLeft();
    renderMini();
    typeLoop();
    fillDocTypeSelect();
    updateDocPreviewFromSelect();

    const docTypeSelect = document.getElementById('docTypeSelect');
    if (docTypeSelect) docTypeSelect.addEventListener('change', updateDocPreviewFromSelect);

    // External select wiring: open modal with chosen doc
    const externalSelect = document.getElementById('docSelect');
    if (externalSelect) externalSelect.addEventListener('change', () => {
      const text = externalSelect.value;
      if (!text) return;
      const id = titleToDocId(text);
      if (docTypeSelect) { docTypeSelect.value = id; updateDocPreviewFromSelect(); }
      openModal();
    });

    // Modal logic
    const overlay = document.getElementById('modalOverlay');
    const modalClose = document.getElementById('modalClose');
    const nextBtn = document.getElementById('nextBtn');
    const backBtn = document.getElementById('backBtn');
    const headerCta = document.getElementById('headerCta');
    const startFlowBtn = document.getElementById('startFlowBtn');
    const steps = [document.getElementById('step1'), document.getElementById('step2'), document.getElementById('step3')];
    let stepIndex = 0;
    // Live binding inputs to preview
    const sellerName = document.getElementById('sellerName');
    const sellerPass = document.getElementById('sellerPass');
    const buyerName = document.getElementById('buyerName');
    const buyerPass = document.getElementById('buyerPass');
    const pvSellerName = document.getElementById('pvSellerName');
    const pvSellerPass = document.getElementById('pvSellerPass');
    const pvBuyerName = document.getElementById('pvBuyerName');
    const pvBuyerPass = document.getElementById('pvBuyerPass');

    function bindPreview() {
      if (sellerName) pvSellerName.textContent = sellerName.value || '‚Äî';
      if (sellerPass) pvSellerPass.textContent = sellerPass.value || '‚Äî';
      if (buyerName) pvBuyerName.textContent = buyerName.value || '‚Äî';
      if (buyerPass) pvBuyerPass.textContent = buyerPass.value || '‚Äî';
    }

    function showStep(idx) {
      steps.forEach((s, i) => { s.style.display = i === idx ? 'block' : 'none'; });
      backBtn.style.display = idx > 0 ? 'inline-block' : 'none';
      nextBtn.textContent = idx === steps.length - 1 ? '–ì–æ—Ç–æ–≤–æ' : (idx === 1 ? '–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ' : '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å');
    }
    function openModal() { overlay.style.display = 'flex'; stepIndex = 0; showStep(stepIndex); }
    function closeModal() { overlay.style.display = 'none'; }

    headerCta.addEventListener('click', openModal);
    if (startFlowBtn) startFlowBtn.addEventListener('click', openModal);
    modalClose.addEventListener('click', closeModal);
    overlay.addEventListener('click', (e) => { if (e.target === overlay) closeModal(); });
    backBtn.addEventListener('click', () => { if (stepIndex > 0) { stepIndex -= 1; showStep(stepIndex); } });
    async function startPaymentFlow() {
      // Create order ‚Üí start payment
      try {
        const sel = document.getElementById('docTypeSelect');
        const price = Number(document.getElementById('priceValue')?.textContent || 0);
        const email = document.getElementById('emailInput')?.value || '';
        const doc = sel ? sel.value : 'other';
        let document_id = 1;
        if (doc && doc.indexOf('doc-') === 0) {
          const found = apiDocs.find(d => d.id === doc);
          if (found) document_id = found.docId;
        } else {
          // Fallback: —Å—Ç–∞—Ç–∏–∫–∞ –ø–æ –ø–æ—Ä—è–¥–∫—É (–∫–∞–∫ –∏ –±—ã–ª–æ)
          const idx = (docCatalog.findIndex(d => d.id === doc));
          document_id = idx >= 0 ? (idx + 1) : 1;
        }
        const orderRes = await fetch(window.location.origin + '/api/orders', {
          method: 'POST', headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ document_id, email, price, payload: { sellerName: sellerName?.value, buyerName: buyerName?.value } })
        });
        const order = await orderRes.json();
        if (!order.id) throw new Error('Order create failed');
        const payRes = await fetch(window.location.origin + '/api/payments/start', {
          method: 'POST', headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ provider: 'yookassa', order_id: order.id, amount: price, description: 'DocFlow –æ–ø–ª–∞—Ç–∞', email })
        });
        const pay = await payRes.json();
        if (!pay.url) throw new Error('Payment start failed');
        window.open(pay.url, '_blank');
        stepIndex = 2; showStep(stepIndex);
      } catch (e) {
        alert('–û—à–∏–±–∫–∞ –æ–ø–ª–∞—Ç—ã: ' + e.message);
      }
    }

    nextBtn.addEventListener('click', () => {
      if (stepIndex === 0) {
        const ok = document.getElementById('chk1').checked && document.getElementById('chk2').checked;
        if (!ok) { alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –æ–±–∞ —Å–æ–≥–ª–∞—Å–∏—è.'); return; }
      }
      if (stepIndex === 1) { startPaymentFlow(); return; }
      if (stepIndex < steps.length - 1) { stepIndex += 1; showStep(stepIndex); }
      else { closeModal(); }
    });

    // Input listeners for live binding
    [sellerName, sellerPass, buyerName, buyerPass].forEach(el => {
      if (el) el.addEventListener('input', bindPreview);
    });

    // –û—Ç–∫–ª—é—á–∞–µ–º –∂–∏–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π (–≤–æ–∑–≤—Ä–∞—Ç –∫ –ø—Ä–µ–∂–Ω–µ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é)
    // socket.on('documents-updated', async function(){
    //   await fetchDocumentsFromApi();
    //   fillDocTypeSelect();
    //   updateDocPreviewFromSelect();
    // });
  </script>
</body>
</html>